import{r as u,o as i,c as d,w as R,v as E,a as r,b as h,g as V,t as v}from"./index-CbndSKY-.js";import{a as w}from"./axios-psijd6j_.js";const B={class:"container py-4"},N=r("h2",null,"Search Weather by City",-1),S=["disabled"],W={key:0,class:"spinner-border spinner-border-sm me-2"},P={key:0,class:"text-danger mt-3"},A={key:1,class:"mt-3"},G={__name:"SearchWeatherView",setup(D){const s=u(""),a=u(null),l=u(!1),o=u(""),b=async()=>{var m,n,c,_,g;if(o.value="",a.value=null,!s.value.trim()){o.value='Please input a city, e.g. "Clayton, AU".';return}l.value=!0;try{const e=s.value.trim(),[x,y]=e.split(",").map(p=>p==null?void 0:p.trim()).filter(Boolean),$=`https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(x)}&count=1&language=en&format=json${y?`&country_code=${encodeURIComponent(y)}`:""}`,t=(n=(m=(await w.get($)).data)==null?void 0:m.results)==null?void 0:n[0];if(!t)throw new Error("Location not found");const C=t.latitude,U=t.longitude,k=`https://api.open-meteo.com/v1/forecast?latitude=${C}&longitude=${U}&current_weather=true`,f=(c=(await w.get(k)).data)==null?void 0:c.current_weather;if(!f)throw new Error("No current weather data");a.value={name:`${t.name}${t.country_code?`, ${t.country_code}`:""}`,temp:f.temperature}}catch(e){o.value=(g=(_=e==null?void 0:e.response)==null?void 0:_.data)!=null&&g.message?`Error: ${e.response.data.message}`:String(e)}finally{l.value=!1}};return(m,n)=>(i(),d("div",B,[N,R(r("input",{"onUpdate:modelValue":n[0]||(n[0]=c=>s.value=c),placeholder:"Enter city (e.g. Clayton, AU)",class:"form-control mb-3"},null,512),[[E,s.value]]),r("button",{class:"btn btn-primary",disabled:l.value,onClick:b},[l.value?(i(),d("span",W)):h("",!0),V(" Get Weather ")],8,S),o.value?(i(),d("p",P,v(o.value),1)):h("",!0),a.value?(i(),d("div",A,[r("h4",null,v(a.value.name),1),r("p",null,v(a.value.temp)+" Â°C",1)])):h("",!0)]))}};export{G as default};
