import{r as u,o as n,c as l,a as e,F as f,f as w,t as v,g,b as m,w as b,v as p,d as B,h as x}from"./index-CbndSKY-.js";import{q as D,l as F,b as N,w as V,d as k,e as d,g as q,u as A,f as h,h as C,i as S,j as L}from"./init-oNCQBDxQ.js";const T={class:"list-group"},U={class:"mt-3"},$={__name:"BookList",setup(y){const s=u([]),a=async()=>{s.value=[];const o=D(k(d,"books"),V("isbn",">",1e3),N("isbn","asc"),F(10));(await q(o)).forEach(t=>s.value.push({id:t.id,...t.data()}))},r=async()=>{if(!s.value[0])return;const o=s.value[0].id;await A(h(d,"books",o),{name:"(updated) "+s.value[0].name}),await a()},i=async()=>{if(!s.value[0])return;const o=s.value[0].id;await C(h(d,"books",o)),await a()};return a(),(o,c)=>(n(),l("div",null,[e("button",{class:"btn btn-outline-secondary mb-2",onClick:a},"Reload"),e("ul",T,[(n(!0),l(f,null,w(s.value,t=>(n(),l("li",{class:"list-group-item",key:t.id},[e("strong",null,v(t.isbn),1),g(" â€” "+v(t.name),1)]))),128))]),e("div",U,[s.value[0]?(n(),l("button",{key:0,class:"btn btn-warning me-2",onClick:r},"Update First")):m("",!0),s.value[0]?(n(),l("button",{key:1,class:"btn btn-danger",onClick:i},"Delete First")):m("",!0)])]))}},E={class:"container py-4"},M=e("h2",null,"Add Book",-1),j={class:"col-md-4"},I=e("label",{class:"form-label"},"ISBN (number)",-1),R={class:"col-md-8"},z=e("label",{class:"form-label"},"Name",-1),G=e("div",{class:"col-12"},[e("button",{class:"btn btn-primary",type:"submit"},"Add")],-1),H={key:0,class:"text-danger"},J={key:1,class:"text-success"},K=e("hr",{class:"my-4"},null,-1),O=e("h4",null,"Book List (isbn > 1000, where + orderBy + limit)",-1),W={__name:"AddBookView",setup(y){const s=u(),a=u(""),r=u(""),i=u(!1),o=async()=>{r.value="",i.value=!1;try{await S(k(d,"books"),{isbn:Number(s.value),name:a.value,createdAt:L()}),i.value=!0,a.value="",s.value=null}catch(c){console.error(c),r.value=c.code||String(c)}};return(c,t)=>(n(),l("div",E,[M,e("form",{onSubmit:B(o,["prevent"]),class:"row g-3"},[e("div",j,[I,b(e("input",{"onUpdate:modelValue":t[0]||(t[0]=_=>s.value=_),type:"number",required:"",class:"form-control"},null,512),[[p,s.value,void 0,{number:!0}]])]),e("div",R,[z,b(e("input",{"onUpdate:modelValue":t[1]||(t[1]=_=>a.value=_),type:"text",required:"",class:"form-control"},null,512),[[p,a.value]])]),G,r.value?(n(),l("p",H,v(r.value),1)):m("",!0),i.value?(n(),l("p",J,"Added to Firestore (collection: books)")):m("",!0)],32),K,O,x($)]))}};export{W as default};
